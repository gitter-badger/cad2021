<h1>About</h1>
<p>電腦輔助設計在解決 ____ 問題?</p>
<h4 style="text-align: left;">Don’t confuse essence with tools. </h4>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/-J_xL4IGhJA" title="YouTube video player" width="560"></iframe></p>
<p style="text-align: left;">(<a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-001-structure-and-interpretation-of-computer-programs-spring-2005/video-lectures/">source</a>)</p>
<p>這裡是國立虎尾科技大學-機械設計工程系-電腦輔助設計實習課程網站.</p>
<p>Repository: <a href="https://github.com/mdecourse/cad2021">https://github.com/mdecourse/cad2021</a></p>
<p>Github Pages: <a href="https://mde.tw/cad2021">https://mde.tw/cad2021</a></p>
<p>Zulipchat: <a href="https://kmolab.zulipchat.com">https://kmolab.zulipchat.com</a></p>
<p>Onshape: <a href="https://www.onshape.com/en/education/">https://www.onshape.com/en/education/</a></p>
<p>CoppeliaSim: <a href="https://www.coppeliarobotics.com/">https://www.coppeliarobotics.com/</a></p>
<p><a href="https://mde.tw/cadp2018/downloads/cad_history.pdf">CAD History.pdf</a></p>
<p><a href="https://mde.tw/cadp2018/downloads/cadbook.pdf">CAD Book.pdf</a></p>
<p><a href="https://github.com/CadQuery/cadquery">https://github.com/CadQuery/cadquery</a></p>
<p style="padding-left: 30px;"><a href="https://github.com/CadQuery/CQ-editor">https://github.com/CadQuery/CQ-editor</a></p>
<p><a href="https://github.com/alainrinder/quoridor.py">https://github.com/alainrinder/quoridor.py</a>, RoboDK and CoppeliaSim</p>
<p style="padding-left: 30px;"><a href="https://github.com/Quentin18/Quoridor-Online">https://github.com/Quentin18/Quoridor-Online</a></p>
<p style="padding-left: 30px;"><a href="https://github.com/mrkvost/quoridor">https://github.com/mrkvost/quoridor</a></p>
<p style="padding-left: 30px;"><a href="https://marmelab.com/blog/2019/10/24/quoridor-part-1.html">https://marmelab.com/blog/2019/10/24/quoridor-part-1.html</a></p>
<p style="padding-left: 30px;"><a href="https://arxiv.org/pdf/1908.09453.pdf">Openspiel: framework for reinforcement learning in games</a></p>
<p style="padding-left: 30px;"><a href="https://github.com/CadQuery/cadquery">https://github.com/CadQuery/cadquery</a></p>
<p style="padding-left: 30px;"><a href="https://github.com/gorisanson/quoridor-ai">https://github.com/gorisanson/quoridor-ai</a></p>
<p style="padding-left: 30px;"><a href="https://github.com/zack-hill/quoridor-web">https://github.com/zack-hill/quoridor-web</a></p>
<p style="padding-left: 30px;"><a href="https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.100.5204&amp;rep=rep1&amp;type=pdf">Mastering Quoridor</a> (thesis)</p>
<p style="padding-left: 30px;">在 <a href="https://www.coppeliarobotics.com/">CoppeliaSim</a> 建立步步為營桌遊場景, 以按鍵控制兩人, 四人或六人對陣.</p>
<p style="padding-left: 30px;">設法建立電腦程式, 可在 <a href="https://www.coppeliarobotics.com/">CoppeliaSim</a> 場景中與單一使用者或多使用者對陣.</p>
<p style="padding-left: 30px;">是否也能利用 <a href="https://robodk.com/">RoboDK</a> 或 <a href="https://cyberbotics.com/">Webots</a> 建立對應場景?</p>
<p style="padding-left: 30px;"><a href="https://zh.wikipedia.org/wiki/%E7%89%86%E6%A3%8B">四人步步為營桌遊</a> (<a href="https://gorisanson.github.io/quoridor-ai/">線上版</a>, <a href="https://github.com/mPelland42/Quoridor-Reinforcement-Learning">強化學習</a>, <a href="https://github.com/boriel/quoridor">AI Player</a>)</p>
<p style="padding-left: 30px;"><a href="https://bruceisonfire.net/2020/04/23/my-adventure-with-flosscad-the-birth-of-hexidor/">六人步步為營桌遊</a></p>
<p>Onshape Featurescript: <a href="https://cad.onshape.com/FsDoc/">https://cad.onshape.com/FsDoc/</a></p>
<p style="padding-left: 30px;"><a href="https://www.onshape.com/en/resource-center/videos/beginners-guide-to-featurescript">Beginner's Guide to Featurescript</a> (Video)</p>
<p style="padding-left: 30px;"><a href="https://www.onshape.com/en/features/custom-features">Custom Features</a></p>
<p style="padding-left: 30px;"><a href="https://cadlab.mde.tw/post/onshape-featurescript-spur-gear-lun-kuo-hui-tu.html">Spur Gear</a> (<a href="https://forum.onshape.com/discussion/15700/updated-spur-gear-featurescript">Update</a>)</p>
<p>SolidWorks API: <a href="http://mde.tw/cad2020/content/HW1_SW.html">http://mde.tw/cad2020/content/HW1_SW.html</a></p>
<p>Inventor API: <a href="http://mde.tw/cad2020/content/HW1_INV.html">http://mde.tw/cad2020/content/HW1_INV.html</a></p>
<p>NX API: <a href="http://mde.tw/cad2020/content/HW1_NX.html">http://mde.tw/cad2020/content/HW1_NX.html</a></p>
<h4>電腦輔助設計室與協同設計室行事曆</h4>
<p><a href="https://calendar.google.com/calendar/embed?src=mde.nfu.edu.tw_3439313938333136353439%40resource.calendar.google.com&amp;ctz=Asia%2FTaipei&amp;mode=week&amp;src=mde.nfu.edu.tw_35303530373431313438%40resource.calendar.google.com&amp;ctz=Asia%2FTaipei&amp;src=yen%40gm.nfu.edu.tw&amp;ctz=Asia%2FTaipei">全頁檢視</a></p>
<p><iframe height="600" src="https://calendar.google.com/calendar/embed?src=mde.nfu.edu.tw_3439313938333136353439%40resource.calendar.google.com&amp;ctz=Asia%2FTaipei&amp;mode=week&amp;src=mde.nfu.edu.tw_35303530373431313438%40resource.calendar.google.com&amp;ctz=Asia%2FTaipei&amp;src=yen%40gm.nfu.edu.tw&amp;ctz=Asia%2FTaipei" width="800"></iframe></p>
<h2>Examples</h2>
<p>Onshape to Robot: <a href="https://onshape-to-robot.readthedocs.io/en/latest/">https://onshape-to-robot.readthedocs.io/en/latest/</a></p>
<p><a href="https://www.programmersought.com/article/59331583319/">Onshape to Matlab</a> </p>
<h4>Inverse Kinematics:</h4>
<p style="padding-left: 30px;">RoboDK</p>
<p style="padding-left: 30px;">CoppeliaSim</p>
<p style="padding-left: 30px;">Webots</p>
<p style="padding-left: 30px;"><a href="https://github.com/Phylliade/ikpy">https://github.com/Phylliade/ikpy</a> </p>
<p>Onshape to RoboDK, CoppeliaSim and Webots. &lt;= Machine Learning and Reinforcement Learning</p>
<p><a href="https://cad.onshape.com/documents/56298f9c90df4f577c10ec66/w/ae64289050ff20e29ab48a69/e/fb3ec7729b500dd569ef03c2?configuration=default">Onshape Ex1</a></p>
<p><img alt="" height="392" src="/images/onshape_ex1.png" width="600"/></p>
<p><a href="https://cad.onshape.com/documents/7f4c744a841bb441d1c51956/w/aa991ba802d3774f0d20487c/e/26cece3c2f3e829b22c9a35f">Onshape Ex2</a></p>
<p><img alt="" height="425" src="/images/betarobot.png" width="600"/></p>
<h2>Onshape</h2>
<p><a href="https://405232491.gitbooks.io/gitbook_week3/content/week10.html">https://405232491.gitbooks.io/gitbook_week3/content/week10.html</a></p>
<h4>Featurescript:</h4>
<p style="padding-left: 30px;"><a href="https://www.onshape.com/en/resource-center/videos/beginners-guide-to-featurescript">https://www.onshape.com/en/resource-center/videos/beginners-guide-to-featurescript</a></p>
<p style="padding-left: 30px;"><a href="https://cad.onshape.com/FsDoc/">https://cad.onshape.com/FsDoc/</a></p>
<p style="padding-left: 30px;"><a href="https://cad.onshape.com/FsDoc/tutorials/create-a-slot-feature.html">https://cad.onshape.com/FsDoc/tutorials/create-a-slot-feature.html</a></p>
<p style="padding-left: 30px;"><a href="https://cadlab.mde.tw/post/onshape-featurescript-tutorial-dao-yin.html">Featurescript 導引</a> (<a href="https://cadlab.mde.tw/post/search.html?q=featurescript">其他參考資料</a>)</p>
<p style="padding-left: 30px;"><a href="https://mde.tw/cad2019/content/Onshape.html">Onshape of cad2019</a></p>
<h2>Arduino</h2>
<p>Uno Simulator: <a href="https://www.sites.google.com/site/unoardusim/services">https://www.sites.google.com/site/unoardusim/services</a></p>
<h4>Picsimlab:</h4>
<p style="padding-left: 30px;"><a href="https://github.com/lcgamboa/picsimlab">https://github.com/lcgamboa/picsimlab</a></p>
<p style="padding-left: 30px;"><a href="https://lcgamboa.github.io/">https://lcgamboa.github.io/</a></p>
<p><a href="https://mplabxpress.microchip.com/mplabcloud/ide">https://mplabxpress.microchip.com/mplabcloud/ide</a></p>
<h2>Ethercalc</h2>
<p><a href="http://mde.tw/cd2021/content/Programming.html">http://mde.tw/cd2021/content/Programming.html</a></p>
<h4>有關 ethercalc:</h4>
<p>若 ethercalc 與 redis 合用, sheet 資料將會存入 /var/lib/redis/dump.rdb, 此一檔案儲存設定位於 /etc/redis/redis.conf 中的 dbfilename dump.rdb<br/><br/>使用者若要以 root 身分檢視 /var/lib/redis/dump.rdb 可以透過 sudo -s 以 root 身分執行命令.<br/><br/>若以 /etc/init.d/redis-server stop 關閉 redis, 然後執行 ethercalc, sheet 資料將會存在執行命令目錄下的 dump 目錄中.<br/><br/>在結合 redis 使用下的 ethercalc, 若希望 reset /var/lib/redis/dump.rdb 中的資料:<br/><br/>sudo -s<br/><br/>/etc/init.d/redis-server stop<br/><br/>rm /var/lib/redis/dump.rdb<br/><br/>/etc/init.d/redis-server start<br/><br/>ethercalc<br/><br/>則 /var/lib/redis/dump.rdb 中為空資料.</p>
<h2>CoppeliaSim</h2>
<p><a href="https://www.coppeliarobotics.com/">https://www.coppeliarobotics.com/</a></p>
<p><a href="https://robocomp.github.io/web/">https://robocomp.github.io/web/</a></p>
<p><a href="https://robocomp.github.io/web/gsoc/2019/nikhil_bansal/post02">https://robocomp.github.io/web/gsoc/2019/nikhil_bansal/post02</a></p>
<h2>強化學習</h2>
<h4>Pytorch Reinforcement Learning Library:</h4>
<p style="padding-left: 30px;"><a href="https://github.com/thu-ml/tianshou">https://github.com/thu-ml/tianshou</a></p>
<h1>課程主題</h1>
<p>Solidworks 於 1995 年出現, 在解決 ____ 問題?</p>
<p>Onshape 的出現, 在解決 ____ 問題?</p>
<h4>電腦輔助設計實習課程面臨的第一個問題是:</h4>
<p style="padding-left: 30px;">我們該採用剛購買的 SolidWorks 2021 單機套件, 目前只能支援 IPv4 網路協定認證 (校方安裝認證的 AutoDesk Inventor 已經支援 IPv6 網路協定認證), 還是直接採用近端免安裝, 可以利用瀏覽器使用的 Onshape？</p>
<p style="padding-left: 30px;">就方便性而言, 採用 Onshape 有許多優點, 但 SolidWorks 仍然是目前台灣業界普遍採用的參數式電腦輔助設計軟體, 因此若最後仍無法在純 IPv6 環境下取得使用授權, 仍可以設法在上課前五分鐘先以 IPv4 協定上網取得 SolidWorks 的使用授權後, 再切換至純 IPv6 的網路環境 (Why?). 然後主要的零組件繪圖軟體仍以 Onshape 為主.</p>
<p style="padding-left: 30px;">AutoDesk Inventor 呢? 其他 NX12 以及 Solvespace 等三套用不用? Inventor 與 NX12 仍會用於透過 Python API 網際程式介面修改既有零件參數尺寸的範例中, 而 Solvespace 則仍會納入透過 Msys2 進行編譯後, 可產生基本參數零組件的課程主題中, 假如 Solvespace 也能用於網際程式 API 零件訂製中的一環, 當然更好.</p>
<p style="padding-left: 30px;">至於為何要在電腦輔助設計室採用純 IPv6 網路連線, 主要原因在於只有如此才能有足夠的頻寬聯外, 讓所有學員都能將近端的個人或協同分組倉儲的改版資料送到 Github.com, Gitlab.com 與 Heroku.</p>
<p>Git 與 Fossil SCM 的出現分別在解決 ____ 問題?</p>
<h4>電腦輔助設計實習課程面臨的第二個問題是:</h4>
<p style="padding-left: 30px;">課程的主軸為何? 在承接計算機程式與網際內容管理課程之後, 我們希望能夠儘量透過程式方法, 協助解決機電整合產品設計與開發上所面臨的問題. 其中包括:</p>
<p style="padding-left: 30px;">1. 設計歷程中版本保留的議題 - 採用 CMSiMDE 與 Github, Gitlab, Heroku 及 Fossil SCM 再加上 Onshape 中的設計繪圖版本進行管理.</p>
<p style="padding-left: 30px;">2. 從 CAD 轉檔至 CoppeliaSim 時, 能否透過程式方法加速建模流程?</p>
<p style="padding-left: 30px;">3. 產品設計報告除了 CMSiMDE 中的網頁, 簡報與網誌外, 能夠直接透過 Github Actions 適時建立所需的 pdf 文件與雙欄位論文格式檔案?</p>
<p style="padding-left: 30px;">4. 希望在 CoppeliaSim 場景中建立自動化機電整合製造系統, 能否透過手動 IK, 純程式設定 IK 與客製化 IK  運算模組進行模擬運算?</p>
<p style="padding-left: 30px;">5. CMSiMDE html 是否能夠透過 <a href="https://github.com/showdownjs/showdown">https://github.com/showdownjs/showdown</a> 轉為 Markdown 檔案後, 進一步再透過 Pandoc 轉為 LaTeX 或 pdf, 以便實現產品開發流程中的 <a href="https://en.wikipedia.org/wiki/Literate_programming">Literate Programming </a>架構.</p>
<p style="padding-left: 60px;">It’s been more than three decades since literate programming was invented by the legendary Donald Knuth. Its promise was immense — creating software which was more reliable, more understandable, more maintainable, and with hugely more teaching value — software which targeted both humans and computers.</p>
<p style="padding-left: 60px;">What if we replace the software with physical product, <span style="background-color: #ffff99;">can we reach out a more reliable, more understandable, more maintainable, and with hugely more teaching value product which targeted both humans and computers.</span></p>
<p style="padding-left: 60px;"><span style="background-color: #ffff99;">意即: 如何能夠在人與電腦雙重導向的架構中, 完成更可靠, 更令人容易理解, 更易於維護且具備教育價值的產品開發流程.</span></p>
<p style="padding-left: 60px;"><span style="background-color: #ccffcc;">更可靠</span> - 設計資料不易丟失, 每一個環節都能接受驗證, 針對設計流程提出可信賴且正確運算的結果.</p>
<p style="padding-left: 60px;"><span style="background-color: #ccffcc;">更令人容易理解</span> - 列出與設計相關的每一項細節, 背景說明及參考資料.</p>
<p style="padding-left: 60px;"><span style="background-color: #ccffcc;">更容易維護</span> - 不斷思索如何讓產品設計流程更加快速便捷, 易於管理.</p>
<p style="padding-left: 60px;"><span style="background-color: #ccffcc;">具備教育價值</span> - 留下產品設計歷程中進行決策的所有細節, 並舉出當時所面臨的環境與條件選項, 以供參考追蹤學習.</p>
<p>電腦輔助設計實習課程應該要解決 ____ 問題?</p>
<h4>然後呢?</h4>
<ol>
<li>從 <a href="https://www.pbr-book.org/">https://www.pbr-book.org/</a> 帶出 <a href="https://cyberbotics.com/">Webots </a>也許是下一階段有關電腦輔助與協同產品設計相關課程應該進入的領域. (<a href="https://cyberbotics.com/doc/guide/samples-rendering">https://cyberbotics.com/doc/guide/samples-rendering</a>)</li>
<li>Oauth2 從取得使用者登入帳號之後, 再根據 session 中的資料與 Fossil SCM 的 password management, 或許就能有效連結 Google, Github, Gitlab 帳號. 亦即, 當網際 Python 程式經由 Oauth2 取得使用者帳號後, 就發出一則 SQL, 讓該用戶在 Fossil SCM 視為已經登入, 如此便可由該帳號對所屬 Fossil SCM 倉儲進行管理. (<a href="https://github.com/mdecourse/fossiloauth">https://github.com/mdecourse/fossiloauth</a>)</li>
<li>繼續探究 <a href="https://www.coppeliarobotics.com/helpFiles/en/PyRep.htm">https://www.coppeliarobotics.com/helpFiles/en/PyRep.htm</a> 在機電整合系統中與視覺辨識及強化學習相關應用.</li>
</ol>
<h4>利用 <a href="https://www.onshape.com/en/">Onshape</a> 設計繪圖 (教學使用 course At mde):</h4>
<p style="padding-left: 30px;"><a href="https://learn.onshape.com/collections/onshape-fundamentals-cad">https://learn.onshape.com/collections/onshape-fundamentals-cad</a></p>
<p style="padding-left: 30px;">Onshape Forum: <a href="https://forum.onshape.com/">https://forum.onshape.com/</a></p>
<p style="padding-left: 30px;">Can we joint <a href="https://dev-portal.onshape.com/">https://dev-portal.onshape.com/</a></p>
<p style="padding-left: 30px;"><a href="https://cad.onshape.com/documents/d696553a0a6faad6a14608cd/w/f06420e3afff11bc144d91b6/e/d262ede0a6df1b9bda3cfaa3">Conveyor Calculator</a></p>
<p style="padding-left: 30px;"><a href="https://www.onshape.com/en/resource-center/innovation-blog/how-the-dhl-product-development-team-drives-change-from-the-digital-to-the-physical-world">Digital Manufacturing with Onshape</a></p>
<p style="padding-left: 30px;"><a href="https://www.onshape.com/en/resource-center/articles/how-to-onboard-your-first-robotics-team">https://www.onshape.com/en/resource-center/articles/how-to-onboard-your-first-robotics-team</a></p>
<p style="padding-left: 30px;">Featurescript: <a href="https://cad.onshape.com/FsDoc/">https://cad.onshape.com/FsDoc/</a></p>
<p style="padding-left: 30px;"><a href="https://cadlab.mde.tw/post/tag/featurescript.html">Featurescript 參考資料</a></p>
<p style="padding-left: 30px;"><a href="https://cadlab.mde.tw/post/onshape-featurescript-spur-gear-lun-kuo-hui-tu.html">利用 Featurescript 建立正齒輪程式庫</a> (<a href="https://forum.onshape.com/discussion/12532/update-to-featurescript-spur-gear">Onshape 版本</a>)</p>
<p style="padding-left: 30px;"><a href="https://www.onshape.com/en/features/custom-features">https://www.onshape.com/en/features/custom-features</a></p>
<p>六軸機械手臂在解決 ____ 問題?</p>
<h4>Onshape and CoppeliaSim to create an automation assembly line:</h4>
<p style="padding-left: 30px;"><a href="http://mde.tw/cd2021/content/%E5%85%AD%E8%BB%B8%E6%A9%9F%E6%A2%B0%E8%87%82%E6%A8%A1%E5%9E%8B.html">六軸機械手臂零組件</a></p>
<p style="padding-left: 30px;"><a href="https://www.coppeliarobotics.com/helpFiles/en/buildingAModelTutorial.htm">https://www.coppeliarobotics.com/helpFiles/en/buildingAModelTutorial.htm</a></p>
<p style="padding-left: 30px;"><a href="https://www.coppeliarobotics.com/helpFiles/en/xmlFormat.htm">https://www.coppeliarobotics.com/helpFiles/en/xmlFormat.htm</a></p>
<p style="padding-left: 30px;"><a href="https://www.coppeliarobotics.com/helpFiles/en/simUI-widgets.htm">https://www.coppeliarobotics.com/helpFiles/en/simUI-widgets.htm</a></p>
<p style="padding-left: 30px;"><a href="https://www.coppeliarobotics.com/helpFiles/en/importExport.htm">https://www.coppeliarobotics.com/helpFiles/en/importExport.htm</a></p>
<h4 style="padding-left: 30px;">IK and Automation:</h4>
<p style="padding-left: 60px;"><a href="https://www.coppeliarobotics.com/helpFiles/en/inverseKinematicsTutorial.htm">https://www.coppeliarobotics.com/helpFiles/en/inverseKinematicsTutorial.htm</a></p>
<p style="padding-left: 60px;"><a href="https://www.coppeliarobotics.com/helpFiles/en/basicsOnIkGroupsAndIkElements.htm">https://www.coppeliarobotics.com/helpFiles/en/basicsOnIkGroupsAndIkElements.htm</a></p>
<p style="padding-left: 60px;"><a href="https://www.researchgate.net/publication/351561339_An_Inverse_Kinematics_Demonstration_of_a_Custom_Robot_using_C_and_CoppeliaSim/link/609d4bfb458515c2658c7c52/download">IK example</a> (use Onshape create robot assembly and use Lua and Python to control the robot)</p>
<p style="padding-left: 30px;"></p>
<h2>Featurescript</h2>
<p><a href="https://cad.onshape.com/FsDoc/">https://cad.onshape.com/FsDoc/</a> 能做什麼?</p>
<p><a href="http://cadlab.mde.tw/post/onshape-featurescript-cheng-shi-yu-yan.html">http://cadlab.mde.tw/post/onshape-featurescript-cheng-shi-yu-yan.html</a></p>
<p><a href="https://cadlab.mde.tw/post/tag/featurescript.html">https://cadlab.mde.tw/post/tag/featurescript.html</a> </p>
<p><a href="https://github.com/dcowden/featurescript">https://github.com/dcowden/featurescript</a></p>
<p><a href="https://www.onshape.com/en/features/custom-features">https://www.onshape.com/en/features/custom-features</a></p>
<p><a href="https://deep-geometry.github.io/abc-dataset/">https://deep-geometry.github.io/abc-dataset/</a></p>
<h3>Bevel Gears</h3>
<h4>參考:</h4>
<p style="padding-left: 30px;"><a href="https://hackaday.io/project/174370-minamil-a-minimal-cnc-mill-and-friends/log/185917-bevel-gears-twos-company">https://hackaday.io/project/174370-minamil-a-minimal-cnc-mill-and-friends/log/185917-bevel-gears-twos-company</a></p>
<h4>Featurescript (<a href="https://cad.onshape.com/documents/9b04fb889def400dfd4a693f/v/7e4070a95d663f4afeb156f3/e/786005a281331572a0efe88b">source</a>, <a href="https://forum.onshape.com/discussion/6031/bevel-gear-pair-generator">discussion</a>):</h4>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">/*    
    Bevel Gear pair
    
    This custom feature creates a bevel gear pair.
    
    TODO:
     - use better tooth profile. See:
         https://cad.onshape.com/documents/5742c8cde4b06c68b362d748/v/c65839fc6078faeb4d2aece1/e/01a666571e625f8b819fd75b
*/

FeatureScript 531;
import(path : "onshape/std/geometry.fs", version : "531.0");


annotation { "Feature Type Name": "Bevel Gear Pair", "Filter Selector": ["bevel", "gear"]}
export const BevelGearPair = defineFeature(function(context is Context, id is Id, definition is map)
    precondition
    {
        annotation {"Name": "Number of teeth for gear 1"}
        isInteger(definition.Z1, TEETH_BOUNDS);
        
        annotation {"Name": "Number of teeth for gear 2"}
        isInteger(definition.Z2, TEETH_BOUNDS);

        annotation {"Name": "Module"}
        isReal(definition.m, MODULE_BOUNDS);

        annotation {"Name": "Shafts angle"}
        isAngle(definition.theta, SHAFT_ANGLE_BOUNDS);

        annotation {"Name": "Teeth width"}
        isLength(definition.e, TEETH_WIDTH_BOUNDS);
        
        annotation {"Name": "Height 1"}
        isLength(definition.h1, H1_BOUNDS);
        
        annotation {"Name": "Height 2"}
        isLength(definition.h2, H2_BOUNDS);
        
        annotation {"Name": "Pressure angle"}
        isAngle(definition.alpha, PRESSURE_ANGLE_BOUNDS);
    }
    
    {
        // lambdas
        // pitch apex to outside pitch distance for a bevel gears pair
        var pitchApex = function(r1, r2, theta) { return r2 * sin(theta) + (r2 * cos(theta) + r1) / tan(theta); };
        
        // cone distance (R) for a bevel gears pair
        var coneDistance = function(r1, r2, theta) { return sqrt(pitchApex(r1, r2, theta) ^ 2 + r1 ^ 2); };

        // common values for a gear pair
        const addendum = 1 * definition.m * millimeter;
        const dedendum = 1.25 * definition.m * millimeter;
        const r1 = definition.m * definition.Z1 / 2 * millimeter;  // external pitch radius
        const r2 = definition.m * definition.Z2 / 2 * millimeter;
        const delta1 = atan(sin(definition.theta) / (definition.Z2 / definition.Z1 + cos(definition.theta)));
        const delta2 = atan(sin(definition.theta) / (definition.Z1 / definition.Z2 + cos(definition.theta)));
        const scale_ = 1 - definition.e / coneDistance(r1, r2, definition.theta);  // scale factor for teeth generation

        // gear 1
        var value1 = {
            Z: definition.Z1,
            delta: delta1,
            scale: scale_,
            shift1: 0 * millimeter,
            shift2: 0 * millimeter,
            rot: 0 * degree,
            turn: 0
        };
        bevelGear(context, id + "1", definition, value1);

        // gear 2
        var turn_;
        if ((definition.Z2 % 2) != 0) {
            turn_ = 0;
        }
        else {
            turn_ = 1;
        }
        var value2 = {
            Z: definition.Z2,
            delta: delta2,
            scale: scale_,
            shift1: pitchApex(r1, r2, definition.theta) + dedendum * sin(delta1),
            shift2: pitchApex(r2, r1, definition.theta) + dedendum * sin(delta2),
            rot: definition.theta,
            turn: turn_
        };
        bevelGear(context, id + "2", definition, value2);

    }, {});


function bevelGear(context is Context, id is Id, definition is map, value is map)
{
    /*
    value = {
        Z,
        delta,
        scale,
        shift1,
        shift2,
        rot,
        turn
    }
    */

    // compute gear geometry
    const addendum = 1 * definition.m * millimeter;
    const dedendum = 1.25 * definition.m * millimeter;
    const r = definition.m * value.Z / 2 * millimeter;  // external pitch radius
    const ri = r - definition.e * sin(value.delta);     // internal pitch radius
    const h1 = dedendum * sin(value.delta) + definition.e * cos(value.delta) - dedendum * value.scale * sin(value.delta);
    const ra1 = r + addendum * cos(value.delta);
    const rf1 = r - dedendum * cos(value.delta);
    const ra2 = ri + addendum * cos(value.delta) * value.scale;
    const rf2 = ri - dedendum * cos(value.delta) * value.scale;
    const rf1p = rf1 - definition.h1 / tan(value.delta);
    const rf2p = rf2 - definition.h2 / tan(value.delta);
    //const rf2pp = rf2 - h1 / tan(value.delta);

    const plane1 = plane(vector(0, 0, 0) * millimeter, vector(0, -1, 0), vector(1, 0, 0));
    const sketch1 = newSketchOnPlane(context, id + "sketch1", {"sketchPlane": plane1});
    
    skPolyline(sketch1, "polyline1", {
        points : [
            vector(0 * millimeter, -definition.h1),
            vector(rf1p, -definition.h1),
            vector(rf1, 0 * millimeter),
            vector(rf2, h1),
            vector(rf2p, h1 - definition.h2),
            vector(0 * millimeter, h1 - definition.h2),
            vector(0 * millimeter, -definition.h1)
        ],
        constrained: true
    });

    skSolve(sketch1);

    // rotate extrude segments
    opRevolve(context, id + "revolve1", {
        "entities" : qSketchRegion(id + "sketch1"),
        "axis" : line(vector(0, 0, 0) * millimeter, vector(0, 0, 1)),
        "angleForward" : 360 * degree
    });

    // Remove sketch entities no longer required
    opDeleteBodies(context, id + "delete1", {"entities" : qCreatedBy(id + "sketch1")});

    // teeths generation
    const plane2 = plane(vector(0, 0, 0) * millimeter, vector(0, 0, 1), vector(1, 0, 0));
    const sketch2 = newSketchOnPlane(context, id + "sketch2", {"sketchPlane": plane2});

    // outer teeth profile
    skPolyline(sketch2, "polyline2", {
        points: gearTooth2D(r / cos(value.delta), definition.m, definition.alpha),
    });

    skSolve(sketch2);
    
    const plane3 = plane(vector(0 * millimeter, 0 * millimeter, definition.e), vector(0, 0, 1), vector(1, 0, 0));
    const sketch3 = newSketchOnPlane(context, id + "sketch3", {"sketchPlane": plane3});

    // inner teeth profile
    skPolyline(sketch3, "polyline3", {
        points: gearTooth2D(value.scale * r / cos(value.delta), value.scale * definition.m, definition.alpha),
    });

    skSolve(sketch3);

    // generate tooth body
    opLoft(context, id + "loft1", {
        "profileSubqueries": [
            qCreatedBy(id + "sketch2", EntityType.FACE),
            qCreatedBy(id + "sketch3", EntityType.FACE),
        ],
    });

    // Remove sketch entities no longer required
    opDeleteBodies(context, id + "delete2", {"entities" : qCreatedBy(id + "sketch2")});
    opDeleteBodies(context, id + "delete3", {"entities" : qCreatedBy(id + "sketch3")});

    // move tooth back in place
    const matrix1 = rotationMatrix3d(vector(1, 0, 0), value.delta);
    const transform1 = transform(matrix1, vector(0, 0, 0) * millimeter);
    const transform2 = transform(vector(0 * millimeter, r, dedendum * sin(value.delta)));
    opTransform(context, id + "transform1", {
            "bodies" : qCreatedBy(id + "loft1", EntityType.BODY),
            "transform": transform2 * transform1
    });

    // copy teeth all around
    var transforms = [];
    var names = [];
    for (var i = 1; i &lt; value.Z; i += 1) {
        const matrix = rotationMatrix3d(vector(0, 0, 1), i * 360 / value.Z * degree);
        transforms = append(transforms, transform(matrix, vector(0, 0, 0) * millimeter));
        names = append(names, toString(i));
    }
    opPattern(context, id + "pattern1", {
        "entities": qCreatedBy(id + "loft1", EntityType.BODY),
        "transforms": transforms,
        "instanceNames": names
    });

    // merge all parts
    opBoolean(context, id + "boolean1", {
        "tools" : qCreatedBy(id, EntityType.BODY),
        "operationType" : BooleanOperationType.UNION
    });

    // move gear in place
    const matrix2 = rotationMatrix3d(vector(0, 0, 1), value.turn * 360 / value.Z / 2 * degree);
    const transform3 = transform(matrix2, vector(0, 0, 0) * millimeter);
    const transform4 = transform(vector(0 * millimeter, 0 * millimeter, -value.shift2));
    const matrix3 = rotationMatrix3d(vector(1, 0, 0), value.rot);
    const transform5 = transform(matrix3, vector(0, 0, 0) * millimeter);
    const transform6 = transform(vector(0 * millimeter, 0 * millimeter, value.shift1));
    opTransform(context, id + "transform2", {
        "bodies" : qCreatedBy(id, EntityType.BODY),
        "transform": transform6 * transform5 * transform4 * transform3
    });
}


function gearTooth2D(r is ValueWithUnits, m is number, alpha is ValueWithUnits)
{
    // convert polar to cartesian coordinates
    var polar = function(r, theta) { return r * vector(sin(theta), cos(theta)); };

    // unwind a string this many degrees to go from radius r1 to radius r2
    var iang = function(r1, r2) { return sqrt((r2 / r1) ^ 2 - 1) / PI * 180 * degree - acos(r1 / r2); };

    // point at radius d on the involute curve
    var q6 = function(b, s, t, d) { return polar(d, s * (iang(b, d) + t)); };

    // radius a fraction f up the curved side of the tooth
    var q7 = function(f, r, b, r2, t, s) { return q6(b, s, t, (1 - f) * max(b, r) + f * r2); };

    const Z = 2 * r / (m * millimeter);                      // number of teeth
    const ra = r + 1 * m * millimeter;                       // radius of outer circle (tête)
    const rb = r * cos(alpha);                               // radius of base circle (base de la dent)
    const rf = r - 1.25 * m * millimeter;                    // radius of root circle (pied)
    const w = m * PI / 2 * millimeter;                       // tooth width at pitch circle
    const k = -iang(rb, r) - w / 2 / r / PI * 180 * degree;  // angle to where involute meets base circle on each side of tooth

    const offset = vector(0 * millimeter, -r);               // bring back tooth at origin

    var points;
    if (rf &lt; rb) {
        points = [
            polar(rf, k) + offset,
            q7(0/5, rf, rb, ra, k,  1) + offset, q7(1/5, rf, rb, ra, k,  1) + offset, q7(2/5, rf, rb, ra, k,  1) + offset,
            q7(3/5, rf, rb, ra, k,  1) + offset, q7(4/5, rf, rb, ra, k,  1) + offset, q7(5/5, rf, rb, ra, k,  1) + offset,
            q7(5/5, rf, rb, ra, k, -1) + offset, q7(4/5, rf, rb, ra, k, -1) + offset, q7(3/5, rf, rb, ra, k, -1) + offset,
            q7(2/5, rf, rb, ra, k, -1) + offset, q7(1/5, rf, rb, ra, k, -1) + offset, q7(0/5, rf, rb, ra, k, -1) + offset,
            polar(rf, -k) + offset,
            polar(rf, k) + offset  // close profile
        ];
    }
    else {
        points = [
            q7(0/5, rf, rb, ra, k,  1) + offset, q7(1/5, rf, rb, ra, k,  1) + offset, q7(2/5, rf, rb, ra, k,  1) + offset,
            q7(3/5, rf, rb, ra, k,  1) + offset, q7(4/5, rf, rb, ra, k,  1) + offset, q7(5/5, rf, rb, ra, k,  1) + offset,
            q7(5/5, rf, rb, ra, k, -1) + offset, q7(4/5, rf, rb, ra, k, -1) + offset, q7(3/5, rf, rb, ra, k, -1) + offset,
            q7(2/5, rf, rb, ra, k, -1) + offset, q7(1/5, rf, rb, ra, k, -1) + offset, q7(0/5, rf, rb, ra, k, -1) + offset,
            q7(0/5, rf, rb, ra, k,  1) + offset  // close profile
        ];
    }

    return points;
}


const TEETH_BOUNDS = {
    (unitless) : [4, 25, 250]
} as IntegerBoundSpec;


const SHAFT_ANGLE_BOUNDS = {
    (degree) : [5, 90, 175]
} as AngleBoundSpec;


const MODULE_BOUNDS = {
    (unitless) : [0.1, 1, 10]
} as RealBoundSpec;


const TEETH_WIDTH_BOUNDS = {
    (millimeter) : [0.1, 5, 100],
    (centimeter) : 0.5,
    (meter) : 0.005,
    (inch) : 0.2
} as LengthBoundSpec;


const H1_BOUNDS = {
    (millimeter) : [0.1, 1, 50],
    (centimeter) : 0.1,
    (meter) : 0.001,
    (inch) : 0.0375
} as LengthBoundSpec;


const H2_BOUNDS = {
    (millimeter) : [0.1, 0.5, 50],
    (centimeter) : 0.05,
    (meter) : 0.0005,
    (inch) : 0.0175
} as LengthBoundSpec;


const PRESSURE_ANGLE_BOUNDS = {
    (degree) : [14.999, 20, 25]
} as AngleBoundSpec;
</pre>
<h4>Bevel Gear2 (<a href="https://www.cctech.co.in/assets/files/blog/exploring-onshape-featurescript/Onshape-FeatureScript-for-Bevel-Gear.txt">source</a>, <a href="https://www.cctech.co.in/blog/exploring-onshape-featurescript">page</a>):</h4>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">FeatureScript 961;
import(path : "onshape/std/geometry.fs", version : "961.0");

annotation { "Feature Type Name" : "Bevel Gear" }
export const myFeature = defineFeature(function(context is Context, id is Id, definition is map)
precondition
{
	// Define the parameters of the feature type

	annotation { "Name" : "Module" }
	isInteger(definition.module, POSITIVE_COUNT_BOUNDS);  
	
	annotation { "Name" : "Pressure Angle Input type" }
	definition.PressAngInputType is PressureAngleType;
	
	if(definition.PressAngInputType == PressureAngleType.standardPressAngle)
	{
		annotation { "Name" : "Pressure Angle (degrees)" }
		definition.stdPressAngle is stdPressAngles;
	}
	else
	{
		annotation { "Name" : "Custom Pressure Angle (degrees)"  }
		isAngle(definition.pressureAngle, ANGLE_360_BOUNDS); 
	}
	
	annotation { "Name" : "Number of Teeths in Gear" }
	isInteger(definition.gearTeeths, POSITIVE_COUNT_BOUNDS);
	
	annotation { "Name" : "Face Width" }
	isLength(definition.faceWidth, LENGTH_BOUNDS);        
	
	annotation { "Name" : "Root Fillet Radius" }
	isLength(definition.RootFilletRadius, LENGTH_BOUNDS);
	
	annotation { "Name" : "Gear Ratio" }
	isInteger(definition.gearRatio, POSITIVE_COUNT_BOUNDS);
	
	annotation { "Name" : "Hole Diameter" }
	isLength(definition.HoleDia, LENGTH_BOUNDS);   
	
	//End of Parameter def
}
{
	// Define the function's action
	//Calculations for gear nomenclatures

	var diameteralPitch = (25.4 / definition.module);        
	var gearPitchDia = (definition.gearTeeths / diameteralPitch) * meter;
	definition.pinionTeeths = round(definition.gearTeeths / definition.gearRatio);
	var pinionPitchDia = (definition.pinionTeeths / diameteralPitch) * meter;
	var theta = atan(gearPitchDia / pinionPitchDia);

	theta = ((theta * 180 / PI) / radian);
	var zOffset = (definition.faceWidth * cos((theta / 2) * degree));

	if(zOffset &gt; ((pinionPitchDia / 2) * 0.9))
	{
		throw regenError("Component failed to create - Face Width greater than cone distance");
	}
	
	if(zOffset &lt; ((pinionPitchDia / 2) * 0.2))
	{
		throw regenError("Component failed to create - Face Width less than minimum required value.");
	}
	
	var pitchDiameter = gearPitchDia + definition.faceWidth * sin(theta * 0.5 * degree);
	var planeOffset = 0 * meter;        
	// Recalculate diametral Pitch
	diameteralPitch = definition.gearTeeths / pitchDiameter * meter;
	
	var dedendum =  0;        
	dedendum = calculateDedendum(context, diameteralPitch) * meter;
	
	var rootDiameter = pitchDiameter - (2 * dedendum);

	var baseCircleDiameter = pitchDiameter * cos(definition.pressureAngle);

	var outsideDiameter = (definition.gearTeeths + 2) / diameteralPitch * meter;
	
	// Add base circle sketch;               
	var baseCircle1 = newSketch(context, id + "baseCircle1", {
			"sketchPlane" : qCreatedBy(makeId("Front"), EntityType.FACE)
	});
	
		skCircle(baseCircle1, "baseCircle1", {
			   "center" : vector(0, 0) * meter,
			   "radius" : 1 * (baseCircleDiameter / 2)
		});
	
	skSolve(baseCircle1);

	// End of base circle sketch
	
	// Calculate and define nomenclatures for offset Plane for Loft operation
	var pitchDiameter2 = gearPitchDia - (definition.faceWidth * sin(theta * degree) / 2);
	
	var diameteralPitch2 = definition.gearTeeths / pitchDiameter2 * meter;

	var dedendum2 = 0;
	dedendum2 = calculateDedendum(context, diameteralPitch2) * meter;
	if (dedendum2 == 0)
		throw regenError("failed to calculate value of dedndum");
	
	planeOffset = zOffset;
	
	//Creating Offset Plane
	opPlane(context, id + "plane1", {
			"plane" : plane(vector(0, (-1) *  zOffset / meter, 0) * meter, vector(0, -1, 0 )),
			"width" : 6 * inch,
			"height" : 6 * inch
	});
	
	var rootDiameter2 = pitchDiameter2 - (2 * dedendum2);

	var baseCircleDiameter2 = pitchDiameter2 * cos(definition.pressureAngle);

	var outsideDiameter2 = (definition.gearTeeths + 2) / diameteralPitch2 * meter;
	
	// Add base circle 2 sketch
	var baseCircle2 = newSketch(context, id + "baseCircle2", {
			"sketchPlane" : qCreatedBy((id + "plane1"), EntityType.FACE)
	});
	
	skCircle(baseCircle2, "baseCircle2", {
			"center" : vector(0, 0) * meter,
			"radius" : 1 * (baseCircleDiameter2 / 2)
	});  
		
	skSolve(baseCircle2);
	// End of base circle sketch
   
	// Create sketch entity for shaft.
	var shaftCircle = newSketch(context, id + "shaftCircle", {
			"sketchPlane" : qCreatedBy(makeId("Front"), EntityType.FACE)
	});

	skCircle(shaftCircle, "shaftCircle", {
			"center" : vector(0, 0) * meter,
			"radius" : 1 * (definition.HoleDia / 2)
	});
	
	skSolve(shaftCircle);
	// ### Executing Loft Operation ############################################################       
	opLoft(context, id + "loft1", {
			"profileSubqueries" : [ qCreatedBy(id + "baseCircle1", EntityType.FACE), qCreatedBy(id + "baseCircle2", EntityType.FACE) ],
	});
	// Begining Calculations for Involute points for gear teeth sketch.        
	var involutePoints1 = [];
	var involutePoints2 = [];
	var tempInvoluteSet = [];        

	var toothThicknessAngle = ((2 * PI) / (2 * definition.gearTeeths)) * 180 / PI;       
	var involutePointCount = 15;    
	var involuteIntersectionRadius = baseCircleDiameter / 2;
	var involuteSize = (outsideDiameter / 2) - (baseCircleDiameter / 2);
  
	planeOffset = 0 * meter;

	for (var t = 0; t &lt; involutePointCount; t += 1)
	{    
		involuteIntersectionRadius = (baseCircleDiameter / 2.0) + ((involuteSize / (involutePointCount - 1)) * t);
		var newPt = involutePoint(context, baseCircleDiameter / 2, involuteIntersectionRadius, planeOffset);
		tempInvoluteSet = append(tempInvoluteSet, newPt);
	}
	// Determine the angle between the X axis and a line between the origin of the curve and the intersection point between the involute and the pitch diameter circle.

	var pitchInvolutePt = involutePoint(context, baseCircleDiameter / 2, pitchDiameter / 2, planeOffset);
		
	var pitchPointAngle = atan(pitchInvolutePt[1] / pitchInvolutePt[0]) * 180 /(PI * radian);

	// Determine the angle defined by the tooth thickness as measured at the pitch diameter circle.

	//Angle to rotate the curve
	var rotateAngle = (-1) * (toothThicknessAngle / 2 + pitchPointAngle);
	// Rotate the involute so the intersection point lies on the x axis.
	var cosAngle = cos(rotateAngle * degree);
	var sinAngle = sin(rotateAngle * degree);

	for (var pt in tempInvoluteSet)
	{
		pt[0] = pt[0] * cosAngle - pt[1] * sinAngle;
		pt[1] = pt[0] * sinAngle + pt[1] * cosAngle;
		involutePoints1 = append(involutePoints1, vector( pt[0], pt[1] ) * meter);
		// Create a new set of points with a negated y.  This effectively mirrors the original points about the X axis. 
		var negatedPt = vector(pt[0], (-1) * pt[1] );
		involutePoints2 = append(involutePoints2, negatedPt * meter);
	}

	// Create sketch for Teeth Profile
	var Involute1 = newSketch(context, id + "Involute1", {
			"sketchPlane" : qCreatedBy(makeId("Front"), EntityType.FACE)
	});

	skFitSpline(Involute1, "spline1", {
			"points" : involutePoints1
	});
	
	skFitSpline(Involute1, "spline2", {
			"points" : involutePoints2
	});
	
	skArc(Involute1, "gearTop", {
			"start" : 1 * involutePoints1[involutePointCount - 1] ,
			"mid" : 1 * vector(outsideDiameter / 2, 0 * meter ),
			"end" : 1 * involutePoints2[involutePointCount - 1]
	});
			
   skArc(Involute1, "gearBase", {
			"start" : 1 * involutePoints1[0] ,
			"mid" : 1 * vector(baseCircleDiameter / 2, 0 * meter ),
			"end" : 1 * involutePoints2[0]
	});

	skSolve(Involute1);
	//##### Begining Calculations for Involute points for gear teeth sketch on offset Plane for loft operation. 
	var tempInvoluteSet2 = [];
	var involutePts1 = [];
	var involutePts2 = [];
	
	involuteIntersectionRadius = baseCircleDiameter2 / 2;
	involuteSize = (outsideDiameter2 / 2) - (baseCircleDiameter2 / 2);        
	planeOffset = zOffset;       

	for (var t = 0; t &lt; involutePointCount; t += 1)
	{    
		involuteIntersectionRadius = (baseCircleDiameter2 / 2.0) + ((involuteSize / (involutePointCount - 1)) * t);
		var newPt = involutePoint(context, baseCircleDiameter2 / 2, involuteIntersectionRadius, planeOffset);
		tempInvoluteSet2 = append(tempInvoluteSet2, newPt);
	}
	// Determine the angle between the X axis and a line between the origin of the curve and the intersection point between the involute and the pitch diameter circle.

	pitchInvolutePt = involutePoint(context, baseCircleDiameter2 / 2, pitchDiameter2 / 2, planeOffset);
	debug(context, pitchInvolutePt);
	pitchPointAngle = atan(pitchInvolutePt[1] / pitchInvolutePt[0]) * 180 /(PI * radian);

	// Determine the angle defined by the tooth thickness as measured at the pitch diameter circle.

	//Angle to rotate the curve
	rotateAngle = (-1) * (toothThicknessAngle / 2 + pitchPointAngle);//-backlashAngle
	// Rotate the involute so the intersection point lies on the x axis.
	cosAngle = cos(rotateAngle * degree);
	sinAngle = sin(rotateAngle * degree);

	for (var pt in tempInvoluteSet2)
	{
		pt[0] = pt[0] * cosAngle - pt[1] * sinAngle;
		pt[1] = pt[0] * sinAngle + pt[1] * cosAngle;
		involutePts1 = append(involutePts1, vector( pt[0], pt[1] ) * meter);
	// Create a new set of points with a negated y.  This effectively mirrors the original points about the X axis. 
		var negatedPt = vector(pt[0], (-1) * pt[1] );
		involutePts2 = append(involutePts2, negatedPt * meter);
	}
	// Create sketch for Teeth Profile for offset plane
	var Involute2 = newSketch(context, id + "Involute2", {
		"sketchPlane" : qCreatedBy((id + "plane1"), EntityType.FACE)
	});

	skFitSpline(Involute2, "spline1", {
			"points" : involutePts1
	});
	
	skFitSpline(Involute2, "spline2", {
			"points" : involutePts2
	});
	
	skArc(Involute2, "gearTop", {
			"start" : 1 * involutePts1[involutePointCount - 1] ,
			"mid" : 1 * vector(outsideDiameter2 / 2, 0 * meter ),
			"end" : 1 * involutePts2[involutePointCount - 1]
	});
			
	skArc(Involute2, "gearBase", {
			"start" : 1 * involutePts1[0] ,
			"mid" : 1 * vector(baseCircleDiameter2 / 2, 0 * meter ),
			"end" : 1 * involutePts2[0]
	});

	skSolve(Involute2);

	// Loft Operation for Teeth Profile
	opLoft(context, id + "loft2", {
			"profileSubqueries" : [ qCreatedBy(id + "Involute1", EntityType.FACE), qCreatedBy(id + "Involute2", EntityType.FACE) ],
	});
	
	opFitSpline(context, id + "Axis", {
			"points" : [vector( 0,  0,  0) * inch, vector(0,  -1, 0) * inch] });
	const axis = qCreatedBy(id + "Axis", EntityType.EDGE);

	// Circular patteren operation for creating all the terth profile bodies around base.
	circularPattern(context, id + "gearTeeths", {
			"patternType" : PatternType.PART,
			"entities" : qCreatedBy(id + "loft2", EntityType.BODY),
			"axis" : axis,
			"angle" : 360 * degree,
			"instanceCount" : definition.gearTeeths,
			"equalSpace" : true
	});
	
});

//Function to calculate dedendum value.
export function calculateDedendum(context, diametralPitch)returns number
{
	if(diametralPitch  &lt; ((20 * (PI / 180)) - 0.000001))
	{
		return (1.157 / diametralPitch);
	}
	else
	{
		var circularPitch = PI / diametralPitch;
		if(circularPitch &gt;= 20)
		{
			return (1.25 / diametralPitch);
		}
		else
		{
			return (1.2 / diametralPitch);
		}
	}
}

const PRESSURE_ANGLE_BOUNDS =
{
	(degree) : [14.5, 20, 25]
} as AngleBoundSpec;

export enum stdPressAngles
{
	annotation { "NAME" : "14.5 degree" }
	PressAngle_14_5 ,
	annotation { "NAME" : "20 degree" }
	PressAngle_20,
	annotation { "NAME" : "25 degree" }
	PressAngle_25
}

export enum PressureAngleType
{
	annotation { "Name" : "Standard Pressure Angle(Recomended)" }
	standardPressAngle,
	annotation { "Name" : "Custom Pressure Angle" }
	customPressAngle
}

// Function to calculate Involute Point coordinates / vectors
export function involutePoint(context, baseCircleRadius, involuteIntersectionRadius, planeOffset)returns Vector
{
	var l = sqrt(involuteIntersectionRadius ^ 2 - baseCircleRadius ^ 2 );

	var alpha = (l / baseCircleRadius);
	alpha = alpha * 180 / PI;

	var thta = alpha - (180 / PI) * (acos(baseCircleRadius / involuteIntersectionRadius)) / radian;

	var x = involuteIntersectionRadius * cos(thta * degree) / meter;
	var y = involuteIntersectionRadius * sin(thta * degree) / meter;

	return vector(x,y);
}</pre>
<p></p>
<p style="padding-left: 30px;"></p>
<p></p>
<h2>Oauth2</h2>
<h4>本頁面相關內容的討論, 最終催生出:</h4>
<p style="padding-left: 30px;"><a href="https://github.com/mdecourse/fossiloauth">https://github.com/mdecourse/fossiloauth</a></p>
<p>Flask 與 Fossil SCM  在同一台主機, 可以透過 Oauth2 登入後, 由 Python 程式導引 redirect 登入 Fossil SCM 主機. 其中可以讓 Python 讀取使用者在 Fossil SCM 倉儲中當下所設定的帳號密碼後登入.</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">from flask import Flask
from flask import make_response, request, redirect
import requests

app = Flask(__name__)
app.config['SECRET_KEY'] = 'SUPER SECRET'

@app.route('/')
def hello_world():
    with requests.Session() as s:
        url = 'https://fossil.kmol.info/u/yen/login'
        post_var = {'u': 'username', 'p': 'password'}
        headers = {'X-Requested-With': 'XMLHttpRequest'}
        result = s.post(url, data = post_var, headers = headers)
        cookie = s.cookies.get_dict()
        key = list(cookie.keys())[0]
        value = cookie[key]
        '''
        print(key, value)
        resp = redirect(url)
        resp.set_cookie(key, value)
        return resp
        '''
        response = make_response(redirect(url))
        response.set_cookie(key, value)
        return response
        

if __name__ == '__main__':
    app.run()</pre>
<p>接下來的考量是, 能否不讓使用者直接從 Fossil SCM web 介面中登入?</p>
<h2>SQLite</h2>
<h4>本頁面相關內容的討論, 最終催生出:</h4>
<p style="padding-left: 30px;"><a href="https://github.com/mdecourse/fossiloauth">https://github.com/mdecourse/fossiloauth</a></p>
<p>Cookie</p>
<p><a href="https://www.valentinog.com/blog/cookies/">https://www.valentinog.com/blog/cookies/</a></p>
<p>利用 Python send cookie:</p>
<p><a href="https://stackoverflow.com/questions/7164679/how-to-send-cookies-in-a-post-request-with-the-python-requests-library">https://stackoverflow.com/questions/7164679/how-to-send-cookies-in-a-post-request-with-the-python-requests-library</a></p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">import requests

cookies = {'enwiki_session': '17ab96bd8ffbe8ca58a78657a918558'}

r = requests.post('http://wikipedia.org', cookies=cookies)</pre>
<p>pip3 install selenium</p>
<p>brew install geckodriver</p>
<p>local cookie set to Firefox</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">import requests
from selenium import webdriver

driver = webdriver.Firefox()
session = requests.Session()

headers = {'X-Requested-With': 'XMLHttpRequest'}

url = 'https://fossil.kmol.info/u/yen/login'
driver.get(url)

post_var = {'u': 'username', 'p': 'password'}
  
result = session.post(url, data = post_var, headers = headers)
#print(result)
cookie = session.cookies.get_dict()
#print(cookie)
driver.delete_all_cookies()
response_cookies_browser = [{'name':name, 'value':value} for name, value in cookie.items()]
c = [driver.add_cookie(c) for c in response_cookies_browser]
#the browser now contains the cookies generated from the authentication    
driver.get(url)




</pre>
<p>Use Flask request get remote_addr</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">from flask import request
from flask import jsonify

@app.route("/get_my_ip", methods=["GET"])
def get_my_ip():
    return jsonify({'ip': request.remote_addr}), 200

'''
with app.test_request_context(environ_base={'REMOTE_ADDR': '10.1.2.3'}):
# https://flask.palletsprojects.com/en/2.0.x/testing/
'''
</pre>
<p>利用 Python requests 登入 Fossil SCM 後取得對應的 cookie:</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">import requests

session = requests.Session()

headers = {'X-Requested-With': 'XMLHttpRequest'}

url = 'https://fossil.kmol.info/u/yen/login'
post_var = {'u': 'username', 'p': 'password'}
  
result = session.post(url, data = post_var, headers = headers)
#print(result)
print(session.cookies.get_dict())



</pre>
<p><a href="https://fossil-scm.org/forum/forumpost/59c6552555">https://fossil-scm.org/forum/forumpost/59c6552555</a> (Fossil SCM with json)</p>
<p><a href="https://mde.tw/cp2019/downloads/Why%20Fossil-SCM%20is%20an%20excellent%20choice%20for%20introductory%20programming%20courses.pdf">Why Fossil-SCM is an excellent choice for introductory programming courses </a></p>
<p><a href="https://www.sqlite.org/index.html">https://www.sqlite.org/index.html</a></p>
<p><a href="https://medium.com/@nerdijoe/how-to-deploy-flask-on-iis-with-windows-authentication-733839d657b7">https://medium.com/@nerdijoe/how-to-deploy-flask-on-iis-with-windows-authentication-733839d657b7</a></p>
<p><a href="https://atrium.ai/resources/how-to-implement-oauth-2-0-login-for-python-flask-web-server-applications/">https://atrium.ai/resources/how-to-implement-oauth-2-0-login-for-python-flask-web-server-applications/</a></p>
<p>Fossil SCM</p>
<p><a href="https://fossil-scm.org/home/doc/trunk/www/json-api/api-auth.md">https://fossil-scm.org/home/doc/trunk/www/json-api/api-auth.md</a></p>
<p>Why using Fossil SCM: <a href="https://andreiclinciu.net/why-im-using-fossil-scm-instead-of-other-source-control-systems">https://andreiclinciu.net/why-im-using-fossil-scm-instead-of-other-source-control-systems</a></p>
<p>User passwords are local configuration information.</p>
<p>Passwords are stored in the PW field of the USER table. In older versions of Fossil (prior to 2010-01-11) the password is stored as cleartext. In newer versions of Fossil, the password can be either cleartext or an SHA1 hash (written as a 40-character lower-case hexadecimal number). If the USER.PW field contains a 40-character string, that string is assumed to be a SHA1 hash. If the size of USER.PW is anything other than 40 characters, then it is understood as a plain-text password.</p>
<p>Whenever a password is changed using the web interface or using the "user" command-line method, the new password is stored using the SHA1 encoding. Thus, cleartext passwords will gradually migrate to become SHA1 passwords. All remaining cleartext passwords can be converted to SHA1 passwords using the following command:<br/><br/>    fossil test-hash-passwords REPOSITORY-NAME<br/><br/>Remember that converting from cleartext to SHA1 passwords is an irreversible operation.</p>
<p>The only way to insert a new cleartext password into the USER table is to do so manually using SQL commands. For example:<br/><br/>    UPDATE user SET pw='asdfg' WHERE login='alice';<br/><br/>Note that an password that is an empty string or NULL will disable all login for that user. Thus, to lock a user out of the system, one has only to set their password to an empty string, using either the web interface or direct SQL manipulation of the USER table. Note also that the password field is essentially ignored for the special users named "anonymous", "developer", "reader", and "nobody". It is not possible to authenticate as users "developer", "reader", or "nobody" and the authentication protocol for "anonymous" uses one-time captchas not persistent passwords</p>
<p>Web Interface Authentication<br/><br/>When a user logs into Fossil using the web interface, the login name and password are sent in the clear to the server. The server then hashes the password and compares it against the value stored in USER.PW. If they match, the server sets a cookie on the client to record the login. This cookie contains a large amount of high-quality randomness and is thus intractable to guess. The value of the cookie and the IP address of the client is stored in the USER.COOKIE and USER.IPADDR fields of the USER table on the server. The USER.CEXPIRE field holds an expiration date for the cookie, encoded as a Julian day number. On all subsequent HTTP requests, the cookie value is matched against the USER table to enable access to the repository.</p>
<p>因此若 Python 經由 Oauth2 流程登入後, 若能建立</p>
<p>USER.COOKIE</p>
<p>USER.IPADDR</p>
<p>USER.CEXPIRE</p>
<p>所需資料, 並送出與  USER.COOKIE 對應的 cookie 至 client, 將可視為該帳號已經登入 Fossil SCM.</p>
<p>fossil sql -R repo-name.fossil<br/>.schema user<br/>CREATE TABLE repository.user(<br/>  uid INTEGER PRIMARY KEY,<br/>  login TEXT UNIQUE,<br/>  pw TEXT,<br/>  cap TEXT,<br/>  cookie TEXT,<br/>  ipaddr TEXT,<br/>  cexpire DATETIME,<br/>  info TEXT,<br/>  mtime DATE,<br/>  photo BLOB<br/>);</p>
<p>Sync Protocol Authentication<br/><br/>A different authentication mechanism is used when one repository wants to sync (or push or pull or clone) another repository. When two repositories are syncing, the one that initiates the transaction is the client and the repository that responds is the server. The client works by sending HTTP requests to the server with a method of "xfer" and a content-type of "application/x-fossil". The content is Zlib-compressed text consisting of "cards" of instructions. The first card of this content is a "login" card responsible for authentication. The login card contains the login name of the user and a "signature" where the signature is the SHA1 hash of a nonce and the value of USER.PW. The nonce is the SHA1 hash of the remainder of the request content after the newline (ASCII 14) character that terminates the login card.</p>
<p>Fossil has the following option in /setup_access:<br/><br/>------------------------------------------------------------------------<br/> Allow REMOTE_USER authentication<br/><br/>When enabled, if the REMOTE_USER environment variable is set to the login name of a valid user and no other login credentials are available, then the REMOTE_USER is accepted as an authenticated user. (Property: "remote_user_ok") <br/>------------------------------------------------------------------------<br/><br/>It seems to me that one should be able to configure a web server to authenticate against LDAP/AD and host Fossils behind that.  One would still have to add users to Fossil that match the username that is provided by the authentication, but I believe this should work.</p>
<p>At the Access setup of the Fossil SCM web page:</p>
<p> Allow REMOTE_USER authentication<br/><br/>When enabled, if the REMOTE_USER environment variable is set to the login name of a valid user and no other login credentials are available, then the REMOTE_USER is accepted as an authenticated user. (Property: "remote_user_ok")</p>
<p>By using Python:</p>
<p style="padding-left: 30px;"><a href="https://stackoverflow.com/questions/34418545/flask-faking-request-environremote-user-for-testing">https://stackoverflow.com/questions/34418545/flask-faking-request-environremote-user-for-testing</a></p>
<p style="padding-left: 30px;"><a href="https://tedboy.github.io/flask/generated/generated/flask.Request.remote_user.html">https://tedboy.github.io/flask/generated/generated/flask.Request.remote_user.html</a></p>
<p>By using command:</p>
<p style="padding-left: 30px;">echo "replace into config(name,value) values('remote_user_ok',1)" | fossil<br/>sql -R $repository_filename</p>
<p><br/>Allow HTTP_AUTHENTICATION authentication<br/><br/>When enabled, allow the use of the HTTP_AUTHENTICATION environment variable or the "Authentication:" HTTP header to find the username and password. This is another way of supporting Basic Authentication. (Property: "http_authentication_ok")</p>
<p><a href="https://stackoverflow.com/questions/6999565/python-https-get-with-basic-authentication">https://stackoverflow.com/questions/6999565/python-https-get-with-basic-authentication</a></p>
<p><a href="https://stackoverflow.com/questions/1453264/python-https-client-with-basic-authentication-via-proxy">https://stackoverflow.com/questions/1453264/python-https-client-with-basic-authentication-via-proxy</a></p>
<p><a href="https://serverfault.com/questions/360293/setting-remote-user-for-trac-in-gunicorn-behind-nginx">https://serverfault.com/questions/360293/setting-remote-user-for-trac-in-gunicorn-behind-nginx</a></p>
<p>References:</p>
<p style="padding-left: 30px;"><a href="https://fossil-scm.org/forum/forumpost/363b4668b3">https://fossil-scm.org/forum/forumpost/363b4668b3</a></p>
<p style="padding-left: 30px;"><a href="https://fossil-scm.org/forum/forumpost/df0df6720d">https://fossil-scm.org/forum/forumpost/df0df6720d</a></p>
<p style="padding-left: 30px;"><a href="https://pypi.org/project/pystunnel/">https://pypi.org/project/pystunnel/</a></p>
<h4>主題一:</h4>
<p style="padding-left: 30px;">Python 與 SQLite</p>
<p style="padding-left: 30px;">CMSiMDE 與 SQLite</p>
<p style="padding-left: 30px;">利用 Python 讀取 Fossil SCM 資料庫內容</p>
<p style="padding-left: 60px;"><a href="https://github.com/mdecourse/fossilpy">https://github.com/mdecourse/fossilpy</a></p>
<p style="padding-left: 60px;"><a href="https://github.com/ggicci/python-fossil-delta">https://github.com/ggicci/python-fossil-delta</a></p>
<h3>Althttpd</h3>
<p><a href="https://sqlite.org/althttpd/doc/trunk/althttpd.md">https://sqlite.org/althttpd/doc/trunk/althttpd.md</a></p>
<p></p>
<h2>Elixir</h2>
<p>Elixir 在解決 ____, ____, ____, ____等問題.</p>
<p><a href="/downloads/a_history_of_erlang.pdf">A history of Erlang</a></p>
<p><a href="https://github.com/dwyl/learn-elixir">https://github.com/dwyl/learn-elixir</a></p>
<p><a href="https://inquisitivedeveloper.com/tag/lwm-elixir/">https://inquisitivedeveloper.com/tag/lwm-elixir/</a></p>
<p><a href="https://www.phoenixframework.org/">https://www.phoenixframework.org/</a></p>
<h4>Dart + Phonix:</h4>
<p style="padding-left: 30px;"><a href="https://pub.dev/packages/phoenix_socket">https://pub.dev/packages/phoenix_socket</a></p>
<p style="padding-left: 30px;"><a href="https://pub.dev/packages/phoenix_wings">https://pub.dev/packages/phoenix_wings</a></p>
<p style="padding-left: 30px;"><a href="https://github.com/approov/quickstart-flutter-elixir-phoenix-channels">https://github.com/approov/quickstart-flutter-elixir-phoenix-channels</a></p>
<p><a href="https://drive.google.com/file/d/1CZfEjvHtQSlAch83jHmw4Ivz6WubPu8h/view?usp=sharing">Erlang and Elixir portable.7z</a> for Windows</p>
<p>Mac: <a href="https://medium.com/@cseanc/setup-elixir-phoenix-on-your-mac-85c9e491fb1">https://medium.com/@cseanc/setup-elixir-phoenix-on-your-mac-85c9e491fb1</a></p>
<p><a href="https://ithelp.ithome.com.tw/articles/10192375">https://ithelp.ithome.com.tw/articles/10192375</a> (函數式編程 Elixir 簡介)</p>
<p>Can mechanical designer also take advantage of Elixir?</p>
<p style="padding-left: 30px;"><a href="https://phoenixframework.org/">https://phoenixframework.org/</a></p>
<p><a href="https://link.springer.com/book/10.1007/978-1-4842-2394-9">Erlang and Elixir for Imperative Programmers</a> (ebook)</p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/xrIjfIjssLE" title="YouTube video player" width="560"></iframe></p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/OcExABAAsXs" title="YouTube video player" width="560"></iframe></p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/lxYFOM3UJzo" title="YouTube video player" width="560"></iframe></p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/zL2wcqS78UA" title="YouTube video player" width="560"></iframe></p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/me4cANg9RMU" title="YouTube video player" width="560"></iframe></p>
<p><a href="https://www.kabisa.nl/tech/when-elixirs-performance-becomes-rust-y/">https://www.kabisa.nl/tech/when-elixirs-performance-becomes-rust-y/</a></p>
<p><a href="https://www.infoq.com/news/2019/07/rust-elixir-performance-at-scale/">https://www.infoq.com/news/2019/07/rust-elixir-performance-at-scale/</a></p>
<h4>Elixir and IOT:</h4>
<p style="padding-left: 30px;"><a href="https://medium.com/@carlogilmar/learning-iot-first-steps-with-elixir-310c4ad4ab15">https://medium.com/@carlogilmar/learning-iot-first-steps-with-elixir-310c4ad4ab15</a></p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/zWytNNPnJUk" title="YouTube video player" width="560"></iframe></p>
<h4>Elixir and reinforcement learning:</h4>
<p style="padding-left: 30px;"><a href="https://github.com/doctorcorral/gyx">https://github.com/doctorcorral/gyx</a></p>
<p style="padding-left: 30px;"><a href="https://medium.datadriveninvestor.com/elixir-e-reinforcement-learning-i-3ecd9399d03c">https://medium.datadriveninvestor.com/elixir-e-reinforcement-learning-i-3ecd9399d03c</a></p>
<p style="padding-left: 30px;"><a href="https://www.erlang-solutions.com/blog/how-to-build-a-machine-learning-project-in-elixir/">https://www.erlang-solutions.com/blog/how-to-build-a-machine-learning-project-in-elixir/</a></p>
<p style="padding-left: 30px;"><a href="https://elixirforum.com/search?q=machine%20learning">https://elixirforum.com/search?q=machine%20learning</a></p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/n0X61Ad8Ofo" title="YouTube video player" width="560"></iframe></p><h3>可攜 Elixir</h3>
<p>採用 Elixir 希望解決 ____ 問題?</p>
<p><a href="https://elixir-lang.org/blog/2013/08/08/elixir-design-goals/">https://elixir-lang.org/blog/2013/08/08/elixir-design-goals/</a> </p>
<p>在 Windows 環境中建立可攜 Erlang 與 Elixir 的方法, 是先在操作系統中安裝後, 將 Erlang 與 Elixir 目錄內容取出放入可攜系統 y:\ 中的 elixir 目錄後, 在控制台中分別解除 Erlang 與 Elixir 的系統安裝, 然後必須要進入取出放入隨身碟或系統其他目錄後, 先修改:</p>
<p>Y:\elixir\erl10.7\bin 以及 Y:\elixir\erl10.7\erts-10.7\bin 目錄中的兩個 erl.ini:</p>
<p>將原先設定為操作系統安裝的路徑, 改為隨身可攜系統的對應路徑:</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">[erlang] 
Bindir=Y:\\elixir\\erl10.7\\erts-10.7\\bin 
Progname=erl 
Rootdir=Y:\\elixir\\erl10.7\\ 
</pre>
<p>至於在隨身系統啟動後, 開啟互動式 Elixir 的 batch file, elixir.bat 內容為:</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">"y:\elixir\erl10.7\bin\werl.exe" -env ERL_LIBS "y:\elixir\Elixir\lib" -user Elixir.IEx.CLI -extra --no-halt</pre>
<p>而 erlang.bat 則為:</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">echo off
y:\elixir\erl10.7\bin\werl.exe</pre>
<p>另外, 在啟動隨身系統的 start_ipv6.bat 中則加入:</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">REM for Erlang and Elixir
set path_erlang=%Disk%:\elixir\erl10.7\bin\;%Disk%:\elixir\erl10.7\erts-10.7\bin;%Disk%:\elixir\elixir\bin\;
set ERTSPATH=%Disk%:\elixir\erl10.7\erts-10.7\bin
set ERLINI=%Disk%:\elixir\erl10.7\erts-10.7\bin\erl.ini</pre>
<p>並將 %path_erlang% 納入隨後的 Path 環境變數中.</p>
<p>如此就可以在啟動隨身系統後, 以 elixir.bat 啟動 Elixir 互動環境, 而執行 erlang.bat 則啟動 Erlang  互動環境.</p>
<h4>根據上述流程設定的 Elixir 可攜系統下載:</h4>
<p style="padding-left: 30px;"><a href="https://drive.google.com/file/d/1CZfEjvHtQSlAch83jHmw4Ivz6WubPu8h/view?usp=sharing">Erlang 10.7 and Elixir portable.7z</a> for Windows (下載 62MB , 解開壓縮後 340MB)</p>
<p>基本操作: <a href="https://inquisitivedeveloper.com/lwm-elixir-75/">https://inquisitivedeveloper.com/lwm-elixir-75/</a></p><h1>可攜系統</h1>
<p>可攜系統在解決 ____ 問題?</p>
<p><a href="https://drive.google.com/file/d/1hTvN4mCk2b_enIK204HA0AVPsd3GPlh5/view?usp=sharing">portablekmol_base.7z</a> (下載 118MB, 解開壓縮後 148MB)</p>
<p style="padding-left: 30px;">包括 data 目錄與 start_ipv6.bat, start_ipv4.bat, stop.bat</p>
<p style="padding-left: 30px;">功能: 啟動後可以啟動 SciTE 編輯器, 可用於類解譯 ANSI C 程式, 以及 <a href="https://solvespace.com">Solvespace</a>.</p>
<p><a href="https://drive.google.com/file/d/1BGfN5R6Yw1e9Unm4u8GCRP4xcSuYfCSE/view?usp=sharing">Python395.7z</a> (下載 123MB, 解開壓縮後 495MB)</p>
<p style="padding-left: 30px;">功能: 與 <a href="https://drive.google.com/file/d/1hTvN4mCk2b_enIK204HA0AVPsd3GPlh5/view?usp=sharing">portablekmol_base.7z</a> 結合後, 可以利用 SciTE 編輯器執行 Python 程式.</p>
<p style="padding-left: 30px;">請注意: 由於 CMSiMDE 改用 adhoc ssl_context 啟動近端伺服器, 因此 Python 解譯系統必須加裝 pyopenssl 模組: pip install pyopenssl,  且安裝前要先將系統 proxy 暫時關閉.</p>
<p><a href="https://drive.google.com/file/d/1RW51wCJ056TdWvjharBKOl6FM9iewpHI/view?usp=sharing">portablegit_2.31.1.7z</a> (下載 60MB, 解開壓縮後 286MB)</p>
<p style="padding-left: 30px;">功能: 與 <a href="https://drive.google.com/file/d/1hTvN4mCk2b_enIK204HA0AVPsd3GPlh5/view?usp=sharing">portablekmol_base.7z</a> 結合後, 可以利用可攜程式系統的命令列視窗執行 git 指令.</p>
<p><a href="https://drive.google.com/file/d/1JDmc_b4BLwGh4hQ7Tatq02EXmiPLrNZV/view?usp=sharing">lua-5.4.3.7z</a> (下載 662KB, 解開壓縮後 4MB)</p>
<p style="padding-left: 30px;">功能: 與 <a href="https://drive.google.com/file/d/1hTvN4mCk2b_enIK204HA0AVPsd3GPlh5/view?usp=sharing">portablekmol_base.7z</a> 結合後, 可以利用 SciTE 編輯器執行 Lua 程式.</p>
<p><a href="https://drive.google.com/file/d/1u-Efwoizvqn9WJdcL0fez7a2d0ulGBcs/view?usp=sharing">PUTTY.7z</a> (下載 940KB, 解開壓縮後 4MB)</p>
<p style="padding-left: 30px;">功能: plink.exe 可以與 git 結合, 利用 Putty.exe 中所設定的 session 名稱進行 SSH 連線.</p>
<p><a href="https://drive.google.com/file/d/1m6cmWu9AZhkBj6wFn9IiJlShcpGbz05g/view?usp=sharing">msys64_20210419.7z</a> (下載 3.5GB, 解開壓縮後 12GB)</p>
<p style="padding-left: 30px;">功能: <a href="https://www.msys2.org/">Msys2</a> 安裝</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">pacman -S mingw-w64-x86_64-toolchain
pacman -Sy mingw-w64-x86_64-qt5
pacman -Sy mingw-w64-x86_64-qt5-static
pacman -Sy mingw-w64-x86_64-ffmpeg
pacman -Sy mingw-w64-x86-64-cmake</pre>
<p><a href="https://drive.google.com/file/d/17M7Ro9NO2mmycvwOuK-10yYgs2oxFwEB/view?usp=sharing">msys64_20210419_clean.7z</a> (下載 87MB , 解開壓縮後 374MB)</p>
<p style="padding-left: 30px;">功能: 尚未安裝任何 Package 的 <a href="https://www.msys2.org/">Msys2</a> 系統.</p>
<p><a href="https://drive.google.com/file/d/1SDLtjyddvFs9OHobMu7Ddx6Doa15RVMY/view?usp=sharing">rust_1.53.0_portable_for_msys2.7z</a> (下載 147MB , 解開壓縮後 1.13GB)</p>
<p><a href="https://drive.google.com/file/d/1CZfEjvHtQSlAch83jHmw4Ivz6WubPu8h/view?usp=sharing">Erlang 10.7 and Elixir portable.7z</a> for Windows (下載 62MB , 解開壓縮後 340MB)</p>
<p><a href="https://drive.google.com/file/d/1BIDn3pn-qQRF0L7rZMNbh43HXyFLhiPj/view?usp=sharing">CoppeliaSimEdu_4.1.0_rev1.7z</a> (下載 183MB, 解開壓縮後 438MB)</p>
<p style="padding-left: 30px;">功能: 可免費提供大學機電資整合課程使用, 且開放原始碼, 可用於機電資控制系統設計與模擬 (InfoMechaTronic control system design and simulation).</p>
<p><a href="https://drive.google.com/file/d/1ih24k0G-vKnB1OjOIxHV4Gyz-bmlxeCU/view?usp=sharing">robodk_522.7z</a> (下載 364MB, 解開壓縮後 1GB)</p>
<p style="padding-left: 30px;">功能: 提供限縮功能版本 Free Trial, 只可模擬但無法存檔, 可用於工業級機械手臂在線與離線控制系統設計與模擬.</p>
<p><a href="https://drive.google.com/file/d/1uDJCaxDsed_5ZTdsHNOfGQ51JnT3aNP0/view?usp=sharing">Range3.7z</a> (下載 27MB, 解開壓縮後 109MB)</p>
<p style="padding-left: 30px;">功能: 開放源 FEM (Finite Element Method) 分析套件.</p>
<p><a href="https://drive.google.com/file/d/1ITHNrhemifHloS_x3BAchyQxMUKma0AI/view?usp=sharing">webots-R2021a.7z</a> (下載 1.5GB, 解開壓所後 2.9GB)</p>
<p style="padding-left: 30px;">功能: 採 Apache 2.0 使用授權的開放源套件, 可用於機電資控制系統設計與模擬.</p>
<h2>Lua 解譯</h2>
<p>網際 Lua 解譯網頁: <a href="http://mde.tw/lab/downloads/lua/index.html">http://mde.tw/lab/downloads/lua/index.html</a></p>
<p>SciTE 編輯器中的 Lua.properties 設定:</p>
<p>選擇利用 y:\lua-5.4.3\luac 與 lua 編譯或解譯 .lua 程式檔案.</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">command.compile.*.lua=y:\lua-5.4.3\luac -o "$(FileName).luc" "$(FileNameExt)"
# Lua 5.1
command.go.*.lua=y:\lua-5.4.3\lua "$(FileNameExt)"</pre>
<p></p>
<h1>CMSiMDE</h1>
<p>CMSiMDE (<a href="https://github.com/mdecourse/cmsimde">https://github.com/mdecourse/cmsimde</a>) 是一套以 Python 與 Flask 框架編寫的網際內容管理系統,</p>
<p>使用 CMSiMDE 建議使用者安裝 flask flask_cors bs4 lxml pelican markdown leo 等模組. 其中的 flask flask_cors bs4 lxml pelican markdown為啟動 CMSiMDE 的必要模組, 而 leo 則是 CMSMDE 開發者所使用的大綱管理工具, 可以用於與 CMSiMDE 整合的 Pelican blog 及 Reveal.js 網際簡報編輯之用.</p>
<h2>建立網頁</h2>
<p>由於 CMSiMDE 帶有動態網頁與靜態網頁等兩個部分, 動態網頁執行時需要該伺服器能夠執行 Python 3, 以及 flask flask_cors bs4 lxml pelican markdown 等模組. 而靜態網頁的伺服則只需要 WWW Server 即可.</p>
<p>若使用者在 Github 使用 CMSiMDE 建立網頁, 可以透過 <a href="https://github.com/mdecourse/cmstemplate">https://github.com/mdecourse/cmstemplate</a> template 建立, 步驟與兩種設定方式如下:</p>
<ol>
<li>使用者登入 Github</li>
<li>將瀏覽器連線至 <a href="https://github.com/mdecourse/cmstemplate">https://github.com/mdecourse/cmstemplate</a> 頁面後, 點擊 Use this template 按鈕後, 選擇所要採用的 repository 名稱後, 就可以建立以 CMSiMDE 作為子模組的 Github 倉儲.</li>
<li>假如使用者所選擇的倉儲名稱為: 帳號.github.io, 則 Github 會自動設定該倉儲的 main 分支為 Github Pages 根目錄, 意即一旦 Github Pages 完成轉檔 (提交訊息之後會出現綠勾), 則該倉儲的對應網頁將為: https://帳號.github.io</li>
<li>若使用利用 <a href="https://github.com/mdecourse/cmstemplate">https://github.com/mdecourse/cmstemplate</a> 作為 template 所建立的倉儲名稱並非 帳號.github.io, 則使用者必須自行至該倉儲的 settings/Github Pages 選項中將 main branch 設為 Github Pages 對應的 root 目錄. 之後, Github 將會採用: 帳號.github.io/倉儲名稱 作為與該倉儲對應的 Github Pages 網址.</li>
</ol>
<h2>基本操作</h2>
<p>當使用者利用 cms.bat 啟用動態網站後, 即可利用瀏覽器 <a>https://localhost:9443</a> 在近端維護網站內容, 由於此時動態網站僅在 localhost 啟動, 因此可以使用內建的管理者密碼 "admin" 登入管理網站內容.</p>
<p>假如使用者修改 init.py 中的 ip 或 uwsgi 設定, 讓動態網站在外部 IP 啟動, 則必須自行透過動態網站中的 <span style="background-color: #ffff99;">config</span> 指令修改管理者密碼.</p>
<p>動態網站編輯表單中的 <span style="background-color: #ffff99;">config</span> 除了可更改網站管理者密碼外, 也可以更改網站的頁面內容標題 (外部標題可以透過 init.py 中的 site_title 更改).</p>
<h3>客製化</h3>
<p>假如利用 <a href="https://github.com/mdecourse/cmstemplate">https://github.com/mdecourse/cmstemplate</a> 作為 template 所建立的 Github Pages 網站, 倉儲根目錄中的 cms.bat 可以在執行動態網站系統之後, 利用 pipe 讓 cms.bat 同時開啟 Firefox <a>https://localhost:9443</a></p>
<p>修改後的 cms.bat 如下:</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">python cmsimde/wsgi.py 1&gt; nul | "C:\Program Files (x86)\Mozilla Firefox\firefox" https://localhost:9443</pre>
<p>前面 python cmsimde/wsgi.py 加上 1&gt; nul 的目的是因為 pipe 執行時會將前面指令執行結果轉為隨後執行指令的輸入, 而 1&gt; nul 則會將標準輸出的任何資料移除, 任何輸出不會影響 Firefox 執行.</p>
<h3>編輯網頁內容</h3>
<p>編輯 CMSiMDE 動態網站中的內容, 可以透過表單中的 <span style="background-color: #ffff99;">Edit All</span> 或 <span style="background-color: #ffff99;">Edit</span> 按鈕進行. <span style="background-color: #ffff99;">Edit</span> 可用於單頁編輯, 操作時先選擇左側的頁面標題, 等系統顯示該頁面內容後, 再點擊上方的 <span style="background-color: #ffff99;">Edit</span> 按鈕即可進入該頁面的編輯模式.</p>
<p><span style="background-color: #ffff99;">Edit All</span> 通常用於單次刪除所有頁面內容或者只保留特定頁面用, 點擊後會將所有頁面內容置於編輯器中.</p>
<h3>上傳與引用檔案</h3>
<p><span style="background-color: #000000; color: #ffffff;">File Upload</span> 可以讓使用者選擇近端多個檔案上傳至動態系統中的 downloads 目錄.</p>
<p>引用使用者上傳的檔案</p>
<p style="padding-left: 30px;"><a href="/downloads/python_book_01.pdf">python_book_01.pdf</a></p>
<h3>上傳與引用圖片</h3>
<p><span style="background-color: #000000; color: #ffffff;">Image Upload</span> 可以讓使用者選擇近端多個檔案上傳至動態系統中的 downloads 目錄.</p>
<p>引用使用者上傳的檔案</p>
<p style="padding-left: 30px;"><img caption="false" class="add_border" height="227" src="/images/nfu_logo_mde.png" width="200"/></p>
<p style="padding-left: 30px;"></p>
<h3>嵌入程式碼</h3>
<p>利用 Insert/Edit code 功能, 可以嵌入各種程式碼:</p>
<pre class="brush:dart;auto-links:false;toolbar:false" contenteditable="false">// 下列 Dart 程式, 利用 Runge Kutta 迭代運算法, 解常微分方程式
// 設 t 為時間, x 則設為物體的位移
// dx / dt = (t - x)/2, 起始值 t0=0, x0=1, 求 t=2 時的 x 值
//
// 已知起始值 t0 與 x0 後, 可以利用下列 rungeKutta 函式, 以
// h 為每步階增量值, 求 dxdt 常微分方程式任一 t 的對應值 x
// 定義函式 rungeKutta, 共有四個輸入變數
rungeKutta(t0, x0, t, h) {
  // 利用步階增量值 h 與 t 的起始及終點值
  // 計算需要迭代的次數 n
  int n = ((t - t0) / h).toInt();
  // 宣告 x 為雙浮點數, 且設為起始值 x0
  double x = x0;
  // 利用已知的 t0, x0, t 終點值與步階增量值 h, 迭代求 x 對應值
  // 索引值 i 將每次增量 1, 從 i=1 執行 for 環圈至 i=n
  for (int i = 1; i &lt;= n; i++) {
    // 將此階段的 t 與 x 值代入 dxdt 函式求下列四個浮點變數值
    double k1 = h * dxdt(t0, x);
    double k2 = h * dxdt(t0 + 0.5 * h, x + 0.5 * k1);
    double k3 = h * dxdt(t0 + 0.5 * h, x + 0.5 * k2);
    double k4 = h * dxdt(t0 + h, x + k3);
    // 利用上述四個變數值求此步階增量後的對應 x 值
    x = x + (1.0 / 6.0) * (k1 + 2 * k2 + 2 * k3 + k4);
    // 每次 for 迴圈執行最後, 準備計算下一個步階增量後的 x 對應值
    // t 起始值配合步階增量值 h, 進行增量
    t0 = t0 + h;
  }
  // 完成 for 迴圈迭代後, 傳回與 t 終點值對應的 x 值
  return x;
}

// 將微分方程式 "dx / dt = (t - x)/2" 定義為 dxdt 函式
dxdt(t, x) {
  return ((t - x) / 2);
}

// 定義 main() 主函式內容, 目的在利用 rungeKutta 函式
// 解常微分方程式
main() {
// Driver method
// num 資料型別可以是整數或雙浮點數
  num t0 = 0;
  num x = 1;
  num t = 2;
  double h = 0.2;
  print('The value of x at t=$t is: ${rungeKutta(t0, x, t, h)}');
}
</pre>
<p></p>
<h3>嵌入影片檔</h3>
<p>直接利用 Source code 功能, 將影片檔案的 iframe 標註放入後存檔:</p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/bZupkkT4T5c" width="560"></iframe></p>
<h3>檢視 STL</h3>
<p>使用 Github 所提供的 STL viewer 嵌入 github.com/mdecourse/cmstemplate main branch 中 downloads 目錄中的 spikeball.stl</p>
<pre class="brush:html;auto-links:false;toolbar:false" contenteditable="false">&lt;script src="https://embed.github.com/view/3d/mdecourse/cmstemplate/main/downloads/spikeball.stl"&gt;&lt;/script&gt;</pre>
<p>將上列 script 標註放入頁面 HTML 內容後, 可以檢視 STL 零件檔案.</p>
<p></p>
<p>
<script src="https://embed.github.com/view/3d/mdecourse/cmstemplate/main/downloads/spikeball.stl"></script>
</p>
<p>以 CMSiMDE 內建的 static/viewstl.html 檢視 STL 檔案:</p>
<p>使用 iframe 其 src 指向 STL 檔案的絕對 URL 路徑:</p>
<p>/static/viewstl.html?src=https://mde.tw/cmstemplate/downloads/spikeball.stl</p>
<p>就可以如下檢視 downloads/spikeball.stl</p>
<p><iframe height="400" src="/static/viewstl.html?src=https://mde.tw/cmstemplate/downloads/spikeball.stl" width="600"></iframe></p>
<h2>Gitlab 同步</h2>
<p>利用 git remote add gitlab <a href="https://gitlab.com/user/repository.git">https://gitlab.com/user/repository.git</a> 可以在近端倉儲中的 .git/config 中新增一個名稱為 gitlab, 且與 <a href="https://gitlab.com/user/repository.git">https://gitlab.com/user/repository.git</a> 倉儲對應的設定. 使用者可以將此倉儲改版內容以 git push gitlab 推向 Gitlab.</p>
<p>至於 Gitlab Pages 額外需要下列 .yml 檔案進行轉換設定:</p>
<p>.gitlab-ci.yml</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">pages:
  stage: deploy
  script:
  - mkdir .public
  - cp -r * .public
  - mv .public public
  artifacts:
    paths:
    - public
  only:
  - master
variables:
  GIT_SUBMODULE_STRATEGY: recursive</pre>
<p></p>
<h2>Heroku 部署</h2>
<p>與 Heroku 部署有關資訊請參考: <a href="https://mde.tw/cp2020/content/Heroku.html">https://mde.tw/cp2020/content/Heroku.html</a></p>
<h2>Fossil SCM</h2>
<p>在 Github 之外, 可以同步將各倉儲資料存放至 Gitlab, Heroku (有 500 MB 容量限制) 與 Fossil SCM.</p>
<p>希望整合 Github 與 Fossil SCM 倉儲步驟說明如下:</p>
<p>針對 Github 中已經有 <a href="https://github.com/mdecourse/cmstemplate">https://github.com/mdecourse/cmstemplate</a> 倉儲, 希望同步建 <a href="https://fossil.kmol.info/cmstemplate">https://fossil.kmol.info/cmstemplate</a> 與之內容同步.</p>
<p>登入 fossil.kmol.info 主機, 在 /home/user/repository 目錄中, 以 fossil init cmstemplate.fossil 建立空倉儲. 此時 Fossil SCM 將會列出以登入帳號作為帳號的管理者密碼.</p>
<p>管理者利用 <a href="https://fossil.kmol.info/cmstemplate">https://fossil.kmol.info/cmstemplate</a> 連結, 以 user 登入, 並利用上列管理者密碼進入管理區, 先行透過 Setup/users 變更 user 對應密碼.</p>
<p>回到 Windows 以 <span style="background-color: #ffff99;">fossil clone https://user@fossil.kmol.info/cmstemplate cmstemplate.fossil</span> 取下倉儲資料, 過程中將需要輸入與 user 對應的密碼, 並被詢問是否儲存密碼, 若選擇儲存密碼則隨後的 fossil commit 將回自動提交推送.</p>
<p>接著在近端必須開啟空 cmstemplate.fossil 倉儲, 主要目的是取得 __FOSSIL__, 並且以 git pull 完整拉下位於 <a href="https://github.com/mdecourse/cmstemplate">https://github.com/mdecourse/cmstemplate</a> 中的資料並與空 __FOSSIL__ 進行整合. 其中在 Fossil SCM 端必須將 Setup/Settings 中的 default-csp 設為: <a href="https://fonts.googleapis.com">https://fonts.googleapis.com</a> (讓 CMSiMDE 靜態網頁可以在 Fossil SCM doc 頁面中正常顯示), 且勾選 dotfiles (讓 Fossil SCM 可以儲存 .git 中的版本資料).</p>
<p></p>
<h4>參考資料:</h4>
<p>編譯 Fossil SCM:</p>
<p style="padding-left: 30px;"> <a href="http://project.mde.tw/blog/zai-msys2-huan-jing-bian-yi-fossil-scm.html">http://project.mde.tw/blog/zai-msys2-huan-jing-bian-yi-fossil-scm.html</a></p>
<h1>注意事項</h1>
<p>因為 <a href="https://github.com/mdecourse/cmstemplate">https://github.com/mdecourse/cmstemplate</a> 將 CMSiMDE 倉儲作為 submodule, 因此使用者利用 cmstemplate 作為 template 後, 必須使用 git clone --recurse-submodules 取下遠端倉儲.</p>
<p>例如:</p>
<p style="padding-left: 30px;">若使用者的倉儲 URL 為 <a href="https://github.com/mdecourse/cmstemplate">https://github.com/mdecourse/cmstemplate</a></p>
<p style="padding-left: 30px;">則可以在近端利用:</p>
<p style="padding-left: 30px;">git clone --recurse-submodules <a href="https://github.com/mdecourse/cmstemplate.git">https://github.com/mdecourse/cmstemplate.git</a></p>
<p style="padding-left: 30px;">將遠端倉儲資料存入 cmstemplate 目錄中.</p>
<p>目前的 cmstemplate 內建 cms.bat 與 acp.bat 等兩個 batch 檔案, 可以協助使用者直接在倉儲根目錄啟動 CMSiMDE 動態網頁, 以及單一指令式即可完成 git add, git commit 以及 git push, 但是前提是使用者必須設定以 ssh 方式與 Github 倉儲進行驗證.</p>
<p>例如:</p>
<p style="padding-left: 30px;">若使用者已經將倉儲內容 clone 至近端, 且已經帶有 cmsimde 子模組的內容.</p>
<p style="padding-left: 30px;">則可以在近端命令列進入 cmstemplate 倉儲目錄執行:</p>
<p style="padding-left: 30px;">cms.bat</p>
<p style="padding-left: 30px;">開啟動態網頁系統. 並以 <a>https://localhost:9443</a> 開啟.</p>
<p style="padding-left: 30px;">一旦完成動態網頁的編輯, 利用 Generate Pages 可以轉為靜態網站, 且各 html 檔案將位於 content 目錄中.</p>
<p style="padding-left: 30px;">若使用者希望檢查近端靜態網頁的內容, 可以利用 SciTE 開啟倉儲中的 http-server.py, 並利用瀏覽器以 <a href="https://localhost:8444">https://localhost:8444</a> 檢查靜態網頁內容.</p>
<p style="padding-left: 30px;">一旦使用者要將近端倉儲的動態與靜態網頁內容推向 Github, 則必須將倉儲中 .git/config 的 url, 從 https 改為 ssh 的連線格式:</p>
<p style="padding-left: 30px;">例如:</p>
<p style="padding-left: 60px;">原先 .git/config origin 的 url 為 url = <a href="https://github.com/mdecourse/cmstemplate.git,">https://github.com/mdecourse/cmstemplate.git,</a> 則必須改為:</p>
<p style="padding-left: 60px;">url = <a href="mailto:git@github.com:mdecourse/cmstemplate.git">git@github.com:mdecourse/cmstemplate.git</a></p>
<p style="padding-left: 60px;">之後假如使用者要以 "add some files" 字串當作提交說明訊息, 則可以在命令列中的倉儲目錄執行:</p>
<p style="padding-left: 60px;">acp.bat "add some files"</p>
<h2>標題選擇</h2>
<p>由於 CMSiMDE 中的動態網站透過 config/content.htm 的 H1~H3 超文件標註進行分頁, 因此使用者利用 cms.bat 開啟動態網站後, 必須注意各頁面標題文字的選擇:</p>
<ol>
<li><span style="background-color: #ffff99;">頁面標題文字儘量簡短</span> - 頁面標題就有如文章的章節標題, 只要該標題具有該頁面內容的代表性即可, 越簡短越好.</li>
<li><span style="background-color: #ffff99;">頁面標題文字不要使用標點符號</span> - 因為標點符號中的 "/" 會造成頁面擷取時 URL 指令分段上的誤判, 至於標題文字中若有 ":" 則會在動態內容轉靜態內容時, 因 Windows 不允許檔案名稱帶有 ":" 而無法轉檔.</li>
<li><span style="background-color: #ffff99;">頁面標題中不可以有超文件標註</span> - 由於 CMSiMDE 動態網站編輯器採用 GUI 進行, 採用滑鼠標修頁面標題時, 可能無意中將 HTML 標註放入 H1~H3 標題文字中, 如此可能會造成 CMSiMDE 分頁錯誤而無法開啟動態網站. 當使用者要檢查所使用的頁面標題是否帶有 html 標註, 可以透過編輯功能中的 Source Code 檢查.</li>
<li><span style="background-color: #ffff99;">H1 標題數量不可過多</span> - 由於 CMSiMDE 的靜態網站支援手機模式, 當頁面 H1 標題數量超過 10 個之後, 頁面標題可能無法在螢幕上最上方以一列顯示, 而是必須出現在第二行, 結果將會導致頁面展開時的 Javascript 程式產生錯亂, 結果為無法直接以滑鼠點擊進入特定頁面.</li>
</ol>
<p></p>
<p></p>
<h2>靜態網頁 404</h2>
<p>當使用者將近端網頁倉儲資料推向 Github 後, commit 提交訊息之後若沒有出現綠勾, 表示靜態網頁無法轉檔成功, 這時連接靜態網頁時, 將會出現 404, 通常情況下是因為倉儲中 cmsimde 子模組的版次無法與遠端 <a href="https://github.com/mdecourse/cmsimde">https://github.com/mdecourse/cmsimde</a> 中的版本對應.</p>
<p>上述靜態網頁出現 404 錯誤訊息的處理方式如下:</p>
<ol>
<li>從 <a href="https://github.com/mdecourse/cmsimde">https://github.com/mdecourse/cmsimde</a> 倉儲中複製最新版本的版次號, 以 <a href="https://github.com/mdecourse/cmsimde/commit/1c3aeec1f5d26b421743d2f5ef8bb7d5b99292af">2021/03/03 的版次</a>為例, 版次號為 1c3aeec1f5d26b421743d2f5ef8bb7d5b99292af, 使用者只需要最前面的 7 個字元, 也就是 1c3aeec.</li>
<li>然後在近端倉儲中, 以命令列進入 cmsimde 目錄後執行: <span style="background-color: #ffff99;">git checkout 1c3aeec</span></li>
<li>接著退回倉儲目錄, 以 git add, git commit 及 git push 將倉儲改版內容推向 Github 後應該就可以將倉儲正確轉為靜態網站內容.</li>
</ol>
<h2>動態網站錯誤</h2>
<p>CMSiMDE 動態網站經常出現的錯誤是無法對 config/content.htm 分頁, 這時可以利用 SCiTE 編輯 content.htm, 找尋是否 H1~H3 標註中是否帶有特殊符號, 如 "/" 或 ":" 等.</p>
<h1>延伸開發</h1>
<p>為了建立 responsive site:</p>
<p>靜態網頁:</p>
<p style="padding-left: 30px;">Javascript 程式庫:</p>
<p style="padding-left: 60px;"><a href="https://getbootstrap.com/">https://getbootstrap.com/</a></p>
<p>動態系統:</p>
<p style="padding-left: 30px;">Javascript editor</p>
<p style="padding-left: 60px;">TinyMCE: <a href="https://www.tiny.cloud/">https://www.tiny.cloud/</a></p>
<p style="padding-left: 30px;">Syntax highlighter: <a href="https://prismjs.com/">https://prismjs.com/</a></p>
<p style="padding-left: 30px;">Ajax bit by bit file uploader:</p>
<p style="padding-left: 30px;">Flask</p>
<p style="padding-left: 30px;">Flask_cors</p>
<p style="padding-left: 30px;">bs4</p>
<p style="padding-left: 30px;">lxml</p>
<p style="padding-left: 30px;">markdown</p>
<h2>已知問題</h2>
<p>cmsimde 是一套始終修改中的機械設計工程導向網際內容管理系統, 由於自 2013 年底開發至今, Python 已經從 3.6 進展到 3.9, 網際發展方向也從 html editor 趨向 markdown editor, WebGL 相關技術與 three.js 的整合也越發成熟.</p>
<p>因此面對</p>
<p><a href="https://github.com/mdecourse/virtualkossel">https://github.com/mdecourse/virtualkossel</a></p>
<p style="padding-left: 30px;"><a href="http://mde.tw/virtualkossel/">http://mde.tw/virtualkossel/</a></p>
<p>cmsimde 應該要導入更多動態零組件展示與互動相關的機械設計功能.</p>
<p>可以著力的方向:</p>
<p style="padding-left: 30px;"><a href="http://help.autodesk.com/view/fusion360/ENU/?guid=GUID-1C665B4D-7BF7-4FDF-98B0-AA7EE12B5AC2">Fusion 360 </a></p>
<p style="padding-left: 60px;"><a href="https://github.com/AutodeskFusion360">https://github.com/AutodeskFusion360</a></p>
<p style="padding-left: 30px;"><a href="https://stromberg.dnsalias.org/~strombrg/pybrowser/python-browser.html">https://stromberg.dnsalias.org/~strombrg/pybrowser/python-browser.html</a></p>
<p style="padding-left: 30px;"><a href="https://vpython.org/">https://vpython.org/</a></p>
<p style="padding-left: 30px;"><a href="https://www.glowscript.org/">https://www.glowscript.org/</a></p>
<p style="padding-left: 30px;"><a href="https://github.com/slembcke/Chipmunk2D">https://github.com/slembcke/Chipmunk2D</a></p>
<p style="padding-left: 60px;"><a href="http://www.pymunk.org/en/latest/">http://www.pymunk.org/en/latest/</a></p>
<p style="padding-left: 30px;"><a href="https://github.com/mrjleo/python-physics-demos">https://github.com/mrjleo/python-physics-demos</a></p>
<p style="padding-left: 30px;">cango3d library: <a href="https://www.arc.id.au/Canvas3DGraphics.html">https://www.arc.id.au/Canvas3DGraphics.html</a></p>
<h3>IPv6</h3>
<p>參考: <a href="https://github.com/tinymce/tinymce/issues/4409">https://github.com/tinymce/tinymce/issues/4409</a> 中的 <a href="https://github.com/tinymce/tinymce/issues/4409#issuecomment-680282550">url parsing 修改</a>後, 目前已經可以在 local 與 IPv6 網路連線中啟用 tinymce4 editor.</p>
<h3>MathJax</h3>
<p>MathJax 引用問題:</p>
<p style="padding-left: 30px;"><a href="https://www.mathjax.org/">https://www.mathjax.org/</a></p>
<h3>html 分頁</h3>
<p>分頁失敗時會意外抹除 config\content.htm 中的所有內容</p>
<p>分頁失敗並不會提供 debug 建議</p>
<h3>template</h3>
<p>cmsimde 針對利用 Flask 產生頁面並未使用 Template, 為了讓程式更加模組化可以考慮納入 <a href="https://www.makotemplates.org/">Mako</a> template engine.</p>
<p></p>